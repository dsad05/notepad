<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Text Editor</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons"/>
    <link rel="stylesheet" href="./style.css" />
    <script src="renderer.js" defer></script>
  </head>
<body>
    <section class="menu">
        <div class="title-bar">
            <span class="document-name" id="documentName">No file selected</span>
            <div class="menu-section">
              <button id="openDocumentBtn">
                <span class="material-icons"> launch </span>
              </button>
              <button id="createDocumentBtn">
                <span class="material-icons"> note_add </span>
              </button>
            </div>
          </div>
        </section>
        <section>
        <button id="undo">Undo</button>
        <button id="redo">Redo</button>
        <button id="print">Print</button>
        <select title="Font" class="ql-font">
          <option value="sans-serif" selected="">Sans Serif</option>
          <option value="serif">Serif</option>
          <option value="monospace">Monospace</option>
        </select>
        <select title="Size" class="ql-size">
          <option value="10px">Small</option>
          <option value="13px" selected="">Normal</option>
          <option value="18px">Large</option>
          <option value="32px">Huge</option>
        </select>
        <input type="number" name="Font size" id="size" value="12" min="1" max="72">
        <button id="bold">Bold</button>
        <button id="italic">Italic</button>
        <button id="underline">Underline</button>
        <button id="text-color">Text color</button>
        <button id="highlight-color">Highlight color</button>
        <button id="link">Insert link</button>
        <button id="link">Line spacing</button>
        <button onclick="countWords()">Count Words</button>
        Signs Count: <span id="signsCounter">0</span>
        Letters Count: <span id="lettersCounter">0</span>
        Words Count: <span id="wordsCounter">0</span>
        Paragraphs Count: <span id="paragraphsCounter">0</span>
    </section>
    <section>
        <main>
            <textarea id="fileTextarea" disabled></textarea>
        </main>
    </section>

    <script>

    //signs counter
    document.getElementById("fileTextarea").addEventListener("keyup", function countSigns() {
        let text = document.getElementById("fileTextarea").value;
        let numSigns = text.length;
        document.getElementById("signsCounter").innerText = numSigns;
    });

    //letters counter
    document.getElementById("fileTextarea").addEventListener("keyup", function countLetters() {
        let text = document.getElementById("fileTextarea").value;
        let numLetters = this.value.match(/[a-zęśąćż]/gi).length;    // flags :g - globally throughout the whole string; i - getting upper and lowercase
        document.getElementById("lettersCounter").innerText = numLetters;
    });

    //words counter
    document.getElementById("fileTextarea").addEventListener("keyup", function countWord() {
        let res = [];
        let str = this.value.replace(/[\t\n\r\.\?\!]/gm, " ").split(" ");
        str.map((s) => {
            let trimStr = s.trim();
            if (trimStr.length > 0) {
                res.push(trimStr);
            }
        });
        document.getElementById("wordsCounter").innerText = res.length;
    });

    //paragraphs counter


    //use tabs to indent
    document.getElementById("fileTextarea").addEventListener("keydown", function(indent) {
    if (indent.key == "Tab") {
        indent.preventDefault();
        let start = this.selectionStart;
        let end = this.selectionEnd;

        // set textarea value to: text before caret + tab + text after caret
        this.value = this.value.substring(0, start) +
        "\t" + this.value.substring(end);

        // put caret at right position again
        this.selectionStart = this.selectionEnd = start + 1;
    }
    });
    </script>
</body>